(function () {
    'use strict';
    angular.module('autocompleteProof', ['ngMaterial', 'ngMessages']).controller('AppCtrl', AppCtrl);

    function AppCtrl ($timeout, $q) {
        var self = this;

        self.girlNames = loadAll();
        self.selectedItem = null;
        self.searchText = null;
        self.querySearch = querySearch;

        /**
         * Pseudo-random timeout
         */
        function querySearch (query) {
            var results = query ? self.girlNames.filter(createFilterFor(query)) : self.girlNames;
            var deferred = $q.defer();
            $timeout(function () {
                deferred.resolve(results);
            }, Math.random() * 1000, false);
            return deferred.promise;
        }

        /**
         * List of name
         */
        function loadAll() {
            var allGirlNames = "Aaliyah,\
                            Abby,\
                            Abigail,\
                            Ada,\
                            Adelaide,\
                            Adele,\
                            Adeline,\
                            Adriana,\
                            Adrienne,\
                            Aileen,\
                            Aisha,\
                            Alana,\
                            Alejandra,\
                            Alexandra,\
                            Alexis,\
                            Alice,\
                            Alicia,\
                            Alisha,\
                            Alison,\
                            Allie,\
                            Allison,\
                            Alma,\
                            Amalia,\
                            Amanda,\
                            Amber,\
                            Amelia,\
                            Amy,\
                            Ana,\
                            Anastasia,\
                            Andrea,\
                            Angel,\
                            Angela,\
                            Angelica,\
                            Angelina,\
                            Angelique,\
                            Angie,\
                            Ann,\
                            Anna,\
                            Annabel,\
                            Annabelle,\
                            Anne,\
                            Annie,\
                            April,\
                            Aria,\
                            Ariel,\
                            Ashley,\
                            Athena,\
                            Audrey,\
                            Aurelia,\
                            Aurora,\
                            Ava,\
                            Azalea,\
                            Barbara,\
                            Beatrice,\
                            Bella,\
                            Belle,\
                            Bethany,\
                            Bianca,\
                            Blair,\
                            Blake,\
                            Bonnie,\
                            Brenda,\
                            Briana,\
                            Brianna,\
                            Bridget,\
                            Brittany,\
                            Brooke,\
                            Cadence,\
                            Calliope,\
                            Cameron,\
                            Camilla,\
                            Camille,\
                            Cara,\
                            Carla,\
                            Carmen,\
                            Carolina,\
                            Cassandra,\
                            Catalina,\
                            Catherine,\
                            Cecelia,\
                            Cecilia,\
                            Celeste,\
                            Celia,\
                            Charlie,\
                            Charlotte,\
                            Chelsea,\
                            Cheyenne,\
                            Chloe,\
                            Christina,\
                            Christine,\
                            Claire,\
                            Clara,\
                            Clarissa,\
                            Claudia,\
                            Clementine,\
                            Colette,\
                            Cora,\
                            Corinne,\
                            Courtney,\
                            Crystal,\
                            Cynthia,\
                            Dahlia,\
                            Daisy,\
                            Dakota,\
                            Dana,\
                            Danielle,\
                            Daphne,\
                            Deborah,\
                            Desiree,\
                            Destiny,\
                            Diana,\
                            Dorothy,\
                            Edith,\
                            Eleanor,\
                            Elena,\
                            Elisa,\
                            Elisabeth,\
                            Elise,\
                            Eliza,\
                            Elizabeth,\
                            Ella,\
                            Ellie,\
                            Ellison,\
                            Eloise,\
                            Elsa,\
                            Ember,\
                            Emilia,\
                            Emily,\
                            Emma,\
                            Erica,\
                            Erika,\
                            Esmeralda,\
                            Esperanza,\
                            Estella,\
                            Estelle,\
                            Esther,\
                            Eva,\
                            Evangeline,\
                            Eve,\
                            Evelyn,\
                            Fatima,\
                            Felicity,\
                            Fiona,\
                            Florence,\
                            Francesca,\
                            Freya,\
                            Gabriela,\
                            Gabrielle,\
                            Genevieve,\
                            Georgia,\
                            Giselle,\
                            Gloria,\
                            Greta,\
                            Gwen,\
                            Gwendolyn,\
                            Hallie,\
                            Hanna,\
                            Hannah,\
                            Harmony,\
                            Heavenly,\
                            Heidi,\
                            Helen,\
                            Helena,\
                            Holly,\
                            Hope,\
                            India,\
                            Ingrid,\
                            Irene,\
                            Iris,\
                            Isabel,\
                            Isabella,\
                            Isabelle,\
                            Ivy,\
                            Jacqueline,\
                            Jade,\
                            Jamie,\
                            Jane,\
                            Janelle,\
                            Jasmine,\
                            Jennifer,\
                            Jenny,\
                            Jessica,\
                            Joanna,\
                            Jocelyn,\
                            Johanna,\
                            Jolene,\
                            Josephine,\
                            Joy,\
                            Judith,\
                            Julia,\
                            Juliana,\
                            Julie,\
                            Juliet,\
                            Juliette,\
                            June,\
                            Juniper,\
                            Justice,\
                            Kara,\
                            Karen,\
                            Karina,\
                            Kate,\
                            Katelyn,\
                            Katherine,\
                            Kathleen,\
                            Kathryn,\
                            Katie,\
                            Keira,\
                            Kendall,\
                            Kimberly,\
                            Kristina,\
                            Lana,\
                            Lara,\
                            Laura,\
                            Laurel,\
                            Lauren,\
                            Lea,\
                            Leila,\
                            Lena,\
                            Leona,\
                            Leslie,\
                            Lia,\
                            Lila,\
                            Lilian,\
                            Liliana,\
                            Lilith,\
                            Lillian,\
                            Lillie,\
                            Lilly,\
                            Lily,\
                            Lina,\
                            Linda,\
                            Lindsey,\
                            Lisa,\
                            Livia,\
                            Lola,\
                            Lorelei,\
                            Louisa,\
                            Louise,\
                            Lucia,\
                            Lucille,\
                            Lucy,\
                            Luna,\
                            Lydia,\
                            Mabel,\
                            Madeleine,\
                            Madelyn,\
                            Madison,\
                            Mae,\
                            Magdalena,\
                            Maggie,\
                            Magnolia,\
                            Mara,\
                            Margaret,\
                            Margo,\
                            Maria,\
                            Mariana,\
                            Marie,\
                            Marilyn,\
                            Marina,\
                            Marisol,\
                            Marissa,\
                            Marjorie,\
                            Marley,\
                            Martha,\
                            Mary,\
                            Matilda,\
                            Maxine,\
                            Maya,\
                            Megan,\
                            Meghan,\
                            Melanie,\
                            Melissa,\
                            Melody,\
                            Mercy,\
                            Meredith,\
                            Mia,\
                            Michelle,\
                            Michelle,\
                            Mila,\
                            Millie,\
                            Mina,\
                            Mira,\
                            Miranda,\
                            Miriam,\
                            Molly,\
                            Monica,\
                            Myra,\
                            Nadia,\
                            Nancy,\
                            Naomi,\
                            Natalia,\
                            Natalie,\
                            Natasha,\
                            Nicole,\
                            Nina,\
                            Noemi,\
                            Nora,\
                            Octavia,\
                            Olive,\
                            Olivia,\
                            Ophelia,\
                            Paige,\
                            Patricia,\
                            Paula,\
                            Pearl,\
                            Penelope,\
                            Phoebe,\
                            Piper,\
                            Priscilla,\
                            Promise,\
                            Rachel,\
                            Ramona,\
                            Reese,\
                            Regina,\
                            Renee,\
                            Reyna,\
                            Rory,\
                            Rosa,\
                            Rosalie,\
                            Rosalyn,\
                            Rose,\
                            Rosemary,\
                            Rosie,\
                            Ruby,\
                            Ruth,\
                            Sabrina,\
                            Samantha,\
                            Sandra,\
                            Sara,\
                            Sarah,\
                            Sasha,\
                            Savanna,\
                            Savannah,\
                            Scarlet,\
                            Selena,\
                            Serena,\
                            Sienna,\
                            Simone,\
                            Sofia,\
                            Sonia,\
                            Sophia,\
                            Sophie,\
                            Stella,\
                            Stephanie,\
                            Summer,\
                            Susan,\
                            Sydney,\
                            Sylvia,\
                            Sylvie,\
                            Teresa,\
                            Tessa,\
                            Tiffany,\
                            Valeria,\
                            Valerie,\
                            Vanessa,\
                            Vera,\
                            Veronica,\
                            Victoria,\
                            Violet,\
                            Virginia,\
                            Vivian,\
                            Vivienne,\
                            Wendy,\
                            Whitney,\
                            Zara,\
                            Zoe";
            return allGirlNames.split(/, +/g).map(function (girlName) {
                return {
                    value: girlName.toLowerCase(),
                    display: girlName
                };
            });
        }

        /**
         * Filter function for a query string
         */
        function createFilterFor(query) {
            var lowercaseQuery = query.toLowerCase();
            return function filterFn(girlName) {
                return (girlName.value.indexOf(lowercaseQuery) === 0);
            };
        }
    }
})();
